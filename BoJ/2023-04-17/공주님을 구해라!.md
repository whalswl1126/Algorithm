# ê³µì£¼ë‹˜ì„ êµ¬í•´ë¼!

[17836ë²ˆ: ê³µì£¼ë‹˜ì„ êµ¬í•´ë¼!](https://www.acmicpc.net/problem/17836)

![Exam](ê³µì£¼ë‹˜ì„ êµ¬í•´ë¼!/exam.png)

---

ê·¸ëŒì´ ì—†ì„ ë•Œì—ëŠ” 1ì´ë©´ ì´ë™í•  ìˆ˜ ì—†ì§€ë§Œ ê·¸ëŒì´ ìˆì„ ë•Œì—ëŠ” 1ì—ë„ ì´ë™í•  ìˆ˜ ìˆë‹¤.

ë°©ë¬¸ê´€ë¦¬ë¥¼ ë”°ë¡œ í•´ì¤˜ì•¼í•˜ëŠ” ê²Œ í•µì‹¬ì¸ ê²ƒ ê°™ë‹¤.

(ì™œëƒë©´ ë‚´ê°€ ë”°ë¡œ ì•ˆí•´ì¤˜ì„œ í‹€ë ¸ìœ¼ë‹ˆê¹Œ ğŸ˜‚)

ì¢Œí‘œì™€ ì´ë™ì‹œê°„, ê·¸ëŒìœ ë¬´ë¥¼ nodeë¡œ ë“¤ê³  ë‹¤ë‹ˆë©´ì„œ bfsë¥¼ ëŒë ¸ë‹¤.

- ê·¸ëŒì´ ì—†ì„ ë•Œ
    - ê·¸ëŒì´ ì—†ëŠ” ê³µê°„ì—ì„œ ë°©ë¬¸í–ˆê±°ë‚˜ ì¢Œí‘œê°’ì´ 1ì´ë©´ continue;
    - ì¢Œí‘œê°’ì´ 2ì´ë©´ ê·¸ëŒì´ ìˆëŠ” ìƒíƒœë¡œ ë³€ê²½
- ê·¸ëŒì´ ìˆì„ ë•Œ
    - ê·¸ëŒì´ ìˆëŠ” ê³µê°„ì—ì„œ ë°©ë¬¸í–ˆìœ¼ë©´ continue;
    - 
- ê³µí†µì ìœ¼ë¡œ
    - ê·¸ëŒì— ë”°ë¥¸ ë°©ë¬¸ ì²˜ë¦¬
    - íì— ì¢Œí‘œ, ì‹œê°„+1, ë³€ê²½ëœ ê·¸ëŒìœ ë¬´ ì¶”ê°€

- í˜„ì¬ ì¢Œí‘œê°€ ê³µì£¼ë‹˜ ì¢Œí‘œì´ë©´
    - í˜„ì¬ ì‹œê°„ ë°˜í™˜
- ë§Œì•½ ê³µì£¼ì¢Œí‘œë¥¼ ëª» ê±°ì¹˜ê³  ëë‚¬ë‹¤ë©´
    - -1 ë°˜í™˜ â‡’ Fail ì¶œë ¥
    

---

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.LinkedList;
import java.util.Queue;
import java.util.StringTokenizer;

public class Main {
	static class Node{
		int r, c, time, gram;
		public Node(int r, int c, int time, int gram) {
			this.r = r;
			this.c = c;
			this.time = time;
			this.gram = gram;
		}
	}
	static int N, M, T, castle[][], test[][];
	static int[] dr = {-1, 0, 1, 0};
	static int[] dc = {0, 1, 0, -1};
	static boolean visited[][][];
	public static void main(String[] args) throws IOException {
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st = new StringTokenizer(br.readLine());
		N = Integer.parseInt(st.nextToken());
		M = Integer.parseInt(st.nextToken());
		T = Integer.parseInt(st.nextToken());
		castle = new int[N][M];
		test = new int[N][M];
		visited = new boolean[N][M][2];
		for (int r = 0; r < N; r++) {
			st = new StringTokenizer(br.readLine());
			for (int c = 0; c < M; c++) {
				castle[r][c] = Integer.parseInt(st.nextToken());
			}
		}
		int time = bfs();
		if(time == -1) {
			System.out.println("Fail");
		}else {
			System.out.println(time);
		}
	}
	private static int bfs() {
		Queue<Node> q = new LinkedList<>();
		
		visited[0][0][0] = true;
		q.offer(new Node(0, 0, 0, 0));
		while(!q.isEmpty()) {
			Node cur = q.poll();
			if(cur.time > T) break;
			if(cur.r == N-1 && cur.c == M-1) {
				return cur.time;
			}
			for (int d = 0; d < 4; d++) {
				int nr = cur.r + dr[d];
				int nc = cur.c + dc[d];
				int isGram = cur.gram;
				if(0>nr || nr>=N || 0>nc || nc>=M) continue;
				if(isGram == 0) {
					if(visited[nr][nc][0] || castle[nr][nc] == 1) continue;
					if(castle[nr][nc] == 2) isGram = 1;
				}else {
					if(visited[nr][nc][1]) continue;
				}
				visited[nr][nc][isGram] = true;
				q.offer(new Node(nr, nc, cur.time+1, isGram));
			}
		}
		return -1;
	}
}
```

![History](ê³µì£¼ë‹˜ì„ êµ¬í•´ë¼!/history.png)

ìˆ˜ë§ì€ ì‹œí–‰ì°©ì˜¤ì˜ í”ì â€¦â€¦